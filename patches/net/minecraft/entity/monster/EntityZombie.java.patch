--- ../net/minecraft/entity/monster/EntityZombie.java
+++ ../net/minecraft/entity/monster/EntityZombie.java
@@ -22,12 +22,20 @@
 import net.minecraft.nbt.NBTTagCompound;
 import net.minecraft.potion.Potion;
 import net.minecraft.potion.PotionEffect;
+import net.minecraft.server.MinecraftServer;
 import net.minecraft.util.MathHelper;
 import net.minecraft.world.World;
+
+//CraftBukkit start
+import org.bukkit.craftbukkit.entity.CraftLivingEntity;
+import org.bukkit.event.entity.EntityCombustByEntityEvent;
+import org.bukkit.event.entity.EntityCombustEvent;
+//CraftBukkit end
 
 public class EntityZombie extends EntityMob
 {
     private int field_82234_d = 0;
+    private int lastTick = MinecraftServer.currentTick; // CraftBukkit
 
     public EntityZombie(World p_i3558_1_)
     {
@@ -96,7 +104,7 @@
 
     public void func_82227_f(boolean p_82227_1_)
     {
-        this.func_70096_w().func_75692_b(12, Byte.valueOf((byte)1));
+        this.func_70096_w().func_75692_b(12, Byte.valueOf((byte)(p_82227_1_ ? 1 : 0)));  // CraftBukkit - added flag
     }
 
     public boolean func_82231_m()
@@ -138,7 +146,16 @@
 
                 if (flag)
                 {
-                    this.func_70015_d(8);
+                    // CraftBukkit start
+                    EntityCombustEvent event = new EntityCombustEvent(this.getBukkitEntity(), 8);
+                    this.field_70170_p.getServer().getPluginManager().callEvent(event);
+
+                    if (!event.isCancelled())
+                    {
+                        this.func_70015_d(event.getDuration());
+                    }
+
+                    // CraftBukkit end
                 }
             }
         }
@@ -151,6 +168,11 @@
         if (!this.field_70170_p.field_72995_K && this.func_82230_o())
         {
             int i = this.func_82233_q();
+            // CraftBukkit start - Use wall time instead of ticks for villager conversion
+            int elapsedTicks = MinecraftServer.currentTick - this.lastTick;
+            this.lastTick = MinecraftServer.currentTick;
+            i *= elapsedTicks;
+            // CraftBukkit end
             this.field_82234_d -= i;
 
             if (this.field_82234_d <= 0)
@@ -168,7 +190,16 @@
 
         if (flag && this.func_70694_bm() == null && this.func_70027_ad() && this.field_70146_Z.nextFloat() < (float)this.field_70170_p.field_73013_u * 0.3F)
         {
-            p_70652_1_.func_70015_d(2 * this.field_70170_p.field_73013_u);
+            // CraftBukkit start
+            EntityCombustByEntityEvent event = new EntityCombustByEntityEvent(this.getBukkitEntity(), p_70652_1_.getBukkitEntity(), 2 * this.field_70170_p.field_73013_u);
+            this.field_70170_p.getServer().getPluginManager().callEvent(event);
+
+            if (!event.isCancelled())
+            {
+                p_70652_1_.func_70015_d(event.getDuration());
+            }
+
+            // CraftBukkit end
         }
 
         return flag;
@@ -177,12 +208,13 @@
     public int func_82193_c(Entity p_82193_1_)
     {
         ItemStack itemstack = this.func_70694_bm();
-        float f = (float)(this.func_70667_aM() - this.func_70630_aN()) / (float)this.func_70667_aM();
+        // CraftBukkit - getMaxHealth() -> ((CraftLivingEntity) this.bukkitEntity).getMaxHealth()
+        float f = (float)(((CraftLivingEntity) this.bukkitEntity).getMaxHealth() - this.func_70630_aN()) / (float)((CraftLivingEntity) this.bukkitEntity).getMaxHealth();
         int i = 3 + MathHelper.func_76141_d(f * 4.0F);
 
         if (itemstack != null)
         {
-            i += itemstack.func_77971_a(this);
+            i += itemstack.func_77971_a((Entity) this);
         }
 
         return i;
@@ -218,20 +250,22 @@
         return EnumCreatureAttribute.UNDEAD;
     }
 
-    protected void func_70600_l(int p_70600_1_)
+    // CraftBukkit start - Return rare dropped item instead of dropping it
+    protected ItemStack func_70600_l(int i)
     {
         switch (this.field_70146_Z.nextInt(3))
         {
             case 0:
-                this.func_70025_b(Item.field_77703_o.field_77779_bT, 1);
-                break;
+                return new ItemStack(Item.field_77703_o.field_77779_bT, 1, 0);
             case 1:
-                this.func_70025_b(Item.field_82797_bK.field_77779_bT, 1);
-                break;
+                return new ItemStack(Item.field_82797_bK.field_77779_bT, 1, 0);
             case 2:
-                this.func_70025_b(Item.field_82794_bL.field_77779_bT, 1);
-        }
-    }
+                return new ItemStack(Item.field_82794_bL.field_77779_bT, 1, 0);
+            default:
+                return null;
+        }
+    }
+    // CraftBukkit end
 
     protected void func_82164_bB()
     {
